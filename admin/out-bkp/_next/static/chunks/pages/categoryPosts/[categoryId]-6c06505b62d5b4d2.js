(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6175],{55297:function(e,i,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/categoryPosts/[categoryId]",function(){return l(69147)}])},69147:function(e,i,l){"use strict";l.r(i);var s=l(85893),n=l(67294),r=l(11163),d=l(9473),t=l(82632),a=l(19736),c=l(86886),o=l(15861),x=l(66242),h=l(68269),j=l(93946),u=l(5616),Z=l(69417),p=l(40196),m=l(41664),v=l.n(m),f=l(90629),g=l(72882),b=l(7906),k=l(53184),_=l(53816),w=l(98102),y=l(295),P=l(22284),C=l(66448),A=l(43992),E=l(59917),N=l(59791);let F={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"50%",bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4};i.default=function(e){let{push:i,query:l}=(0,r.useRouter)(),{categoryId:m}=l,S=(0,d.I0)();(0,d.v9)(t.W3);let D=(0,d.v9)(t.V_);(0,d.v9)(t.R0);let I=(0,d.v9)(t.Vp);(0,d.v9)(a.bd);let T=(0,d.v9)(p.rZ);console.log("categoryPosts",T.data);let[z,L]=(0,n.useState)(""),[V,H]=(0,n.useState)(1);(0,n.useEffect)(()=>{S((0,a.CP)({page:V}))},[V]),(0,n.useEffect)(()=>{m&&S((0,p.S2)({id:m}))},[m]),(0,n.useEffect)(()=>{m&&S((0,t.n3)({id:m}))},[m]),(0,n.useEffect)(()=>{S((0,t.xM)(!1))},[I]);let markAsFeatured=async(e,i)=>{await S((0,E.Uj)({post_id:e.id,is_featured:i})),S((0,p.S2)({id:m}))},[O,R]=n.useState(!1),[M,X]=n.useState(null),handleOpen=()=>{R(!0)};return(0,s.jsxs)(c.ZP,{container:!0,spacing:6,children:[(0,s.jsx)(c.ZP,{item:!0,xs:12,children:(0,s.jsxs)(h.Z,{direction:"row",children:[(0,s.jsx)(o.Z,{variant:"h5",children:"Posts"}),(0,s.jsx)(Z.Z,{component:v(),href:"/posts/create",sx:{marginLeft:"auto"},children:"Create Post"})]})}),(0,s.jsx)(c.ZP,{item:!0,xs:12,children:(0,s.jsx)(x.Z,{children:(0,s.jsxs)(f.Z,{sx:{width:"100%",overflow:"hidden"},children:[D?(0,s.jsx)(o.Z,{variant:"h5",sx:{my:3},textAlign:"center",children:"Loading..."}):(0,s.jsx)(g.Z,{sx:{maxHeight:440},children:(0,s.jsxs)(b.Z,{stickyHeader:!0,"aria-label":"sticky table",children:[(0,s.jsx)(k.Z,{children:(0,s.jsxs)(_.Z,{children:[(0,s.jsx)(w.Z,{children:"ID"}),(0,s.jsx)(w.Z,{children:"Title"}),(0,s.jsx)(w.Z,{children:"Title Arabic"}),(0,s.jsx)(w.Z,{children:"Featured"}),(0,s.jsx)(w.Z,{children:"Action"})]})}),(0,s.jsx)(y.Z,{children:T.data?T.data.map(e=>(0,s.jsxs)(_.Z,{hover:!0,role:"checkbox",tabIndex:-1,children:[(0,s.jsx)(w.Z,{children:(0,s.jsx)("span",{children:e.id})}),(0,s.jsx)(w.Z,{children:(0,s.jsx)("span",{children:e.title})}),(0,s.jsx)(w.Z,{children:(0,s.jsx)("span",{children:e.title_ar})}),(0,s.jsx)(w.Z,{className:"text-center",children:0==e.is_featured?(0,s.jsx)(Z.Z,{onClick:i=>{markAsFeatured(e,1)},children:"Mark as Featured"}):(0,s.jsx)(Z.Z,{onClick:i=>{markAsFeatured(e,0)},children:"Remove from Featured"})}),(0,s.jsxs)(w.Z,{width:"200",children:[(0,s.jsx)(j.Z,{size:"small",variant:"outlined",onClick:l=>{l.preventDefault(),i("/posts/".concat(e.id))},sx:{marginLeft:"auto"},children:(0,s.jsx)(P.Z,{})}),(0,s.jsx)(j.Z,{size:"small",variant:"outlined",onClick:i=>handleDelete(i,e.id),sx:{marginLeft:"auto"},children:(0,s.jsx)(C.Z,{})}),(0,s.jsx)(j.Z,{size:"small",variant:"outlined",onClick:i=>{X(e),handleOpen()},sx:{marginLeft:"auto"},children:(0,s.jsx)(A.Z,{})})]})]},e.id)):(0,s.jsx)(_.Z,{children:(0,s.jsx)(w.Z,{colSpan:9,children:"No posts available"})})})]})}),(0,s.jsx)(N.Z,{open:O,onClose:()=>R(!1),"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,s.jsx)(u.Z,{sx:F,children:(0,s.jsx)(g.Z,{sx:{maxHeight:440},children:(0,s.jsx)(b.Z,{stickyHeader:!0,"aria-label":"sticky table",children:(0,s.jsxs)(k.Z,{children:[(0,s.jsxs)(_.Z,{children:[(0,s.jsx)(w.Z,{children:"ID"}),(0,s.jsx)(w.Z,{children:(0,s.jsx)("span",{children:null==M?void 0:M.id})})]}),(0,s.jsxs)(_.Z,{children:[(0,s.jsx)(w.Z,{children:"Title"}),(0,s.jsx)(w.Z,{children:(0,s.jsx)("span",{children:null==M?void 0:M.title})})]}),(0,s.jsxs)(_.Z,{children:[(0,s.jsx)(w.Z,{children:"Title Arabic"}),(0,s.jsx)(w.Z,{children:(0,s.jsx)("span",{children:null==M?void 0:M.title_ar})})]}),(0,s.jsxs)(_.Z,{children:[(0,s.jsx)(w.Z,{children:"Description"}),(0,s.jsx)(w.Z,{children:(0,s.jsx)("span",{children:null==M?void 0:M.description})})]}),(0,s.jsxs)(_.Z,{children:[(0,s.jsx)(w.Z,{children:"Description Arabic"}),(0,s.jsx)(w.Z,{children:(0,s.jsx)("span",{children:null==M?void 0:M.description_ar})})]}),(0,s.jsxs)(_.Z,{children:[(0,s.jsx)(w.Z,{children:"Video"}),(0,s.jsx)(w.Z,{children:(null==M?void 0:M.video)&&(0,s.jsxs)("video",{width:"240",height:"150",controls:!0,children:[(0,s.jsx)("source",{src:null==M?void 0:M.video,type:"video/mp4"}),"Your browser does not support the video tag."]})})]}),(0,s.jsxs)(_.Z,{children:[(0,s.jsx)(w.Z,{children:"Audio"}),(0,s.jsx)(w.Z,{children:(null==M?void 0:M.audio)&&(0,s.jsxs)("audio",{controls:!0,children:[(0,s.jsx)("source",{src:null==M?void 0:M.audio,type:"audio/mpeg"}),"Your browser does not support the audio element."]})})]}),(0,s.jsxs)(_.Z,{children:[(0,s.jsx)(w.Z,{children:"Image"}),(0,s.jsx)(w.Z,{className:"text-center",children:(null==M?void 0:M.image)!==null&&(null==M?void 0:M.image)!=="null"?(0,s.jsx)(Z.Z,{tag:"a",href:null==M?void 0:M.image,target:"_blank",layout:"link",size:"small",children:"View Image"}):null})]}),(0,s.jsxs)(_.Z,{children:[(0,s.jsx)(w.Z,{children:"PDF"}),(0,s.jsx)(w.Z,{className:"text-center",children:(null==M?void 0:M.pdf)!==null&&(null==M?void 0:M.pdf)!=="null"?(0,s.jsx)(Z.Z,{tag:"a",href:null==M?void 0:M.pdf,target:"_blank",layout:"link",size:"small",children:"View File"}):null})]})]})})})})})]})})})]})}}},function(e){e.O(0,[2657,9254,2331,9774,2888,179],function(){return e(e.s=55297)}),_N_E=e.O()}]);