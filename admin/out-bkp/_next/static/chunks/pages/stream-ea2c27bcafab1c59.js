(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1245],{24886:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/stream",function(){return n(19891)}])},19891:function(e,t,n){"use strict";n.r(t);var r=n(85893),i=n(67294),s=n(53920);n(74581);let o=(0,s.ZP)("https://reverendsameembalius.com:3011"),a={streamTitle:{fontSize:"36px",marginBottom:"20px",display:"none"},streamerVideo:{width:"100%",minHeight:"70vh",border:"1px solid #ccc",marginBottom:"20px"},streamingBtnGroup:{textAlign:"center"},startStreamingBtn:{padding:"10px 20px",fontSize:"18px",cursor:"pointer",backgroundColor:"#007bff",color:"#fff",border:"none"},endStreamingBtn:{padding:"10px 20px",fontSize:"18px",cursor:"pointer",backgroundColor:"#dc3545",color:"#fff",border:"none"}};t.default=()=>{let[e,t]=(0,i.useState)(null),[s,l]=(0,i.useState)([]);(0,i.useRef)(),(0,i.useRef)(),(0,i.useRef)();let[u,c]=(0,i.useState)(null),[d,f]=(0,i.useState)(null),[m,p]=(0,i.useState)(""),g=(0,i.useRef)(),h=(0,i.useRef)(),x=(0,i.useRef)(),clientCome=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;console.log("localStream",t),t?(o.emit("stream-client-request",{clientPeerId:e,message:"Accept"}),g.current.call(null!=e?e:m,t)):o.emit("stream-client-request",{clientPeerId:e,message:"Reject"})};return(0,i.useEffect)(()=>{let initializePeer=async()=>{let e=(await n.e(7623).then(n.bind(n,67623))).default;await c(new e(void 0,{host:"reverendsameembalius.com",port:3014,path:"/peerjs"}))};initializePeer()},[]),(0,i.useEffect)(()=>{let handleStreamEvent=t=>{clientCome(t,e)};return o.on("stream",handleStreamEvent),()=>{o.off("stream",handleStreamEvent)}},[e]),(0,i.useEffect)(()=>{if(u)return u.on("open",function(e){f(e)}),g.current=u,()=>{u.off("open")}},[u]),(0,r.jsxs)("div",{style:{textAlign:"center"},children:[(0,r.jsx)("h1",{style:a.streamTitle,children:(0,r.jsx)("input",{type:"text",value:d,disabled:!0})}),(0,r.jsx)("div",{style:a.streamerVideo,children:(0,r.jsx)("video",{ref:h,autoPlay:!0,muted:!0})}),(0,r.jsxs)("div",{style:a.streamingBtnGroup,children:[(0,r.jsx)("button",{style:a.startStreamingBtn,onClick:()=>{if(!e){let e=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia;e({video:!0,audio:!0},function(e){h.current.srcObject=e,t(e),o.emit("stream-status","Connect")},function(e){console.log("error",e)})}},children:"Start Streaming"}),(0,r.jsx)("button",{style:a.endStreamingBtn,onClick:()=>{e&&e.getTracks().forEach(e=>e.stop()),h.current&&(h.current.srcObject=null),t(null),o.emit("stream-status","Disconnect")},children:"End Streaming"})]}),(0,r.jsx)("div",{children:(0,r.jsx)("video",{ref:x,autoPlay:!0,muted:!0})})]})}}},function(e){e.O(0,[3920,9774,2888,179],function(){return e(e.s=24886)}),_N_E=e.O()}]);