(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[741],{84116:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/viewers",function(){return n(22555)}])},22555:function(e,t,n){"use strict";n.r(t);var s=n(85893),u=n(67294),a=n(53920);n(74581);let r=(0,a.ZP)("https://reverendsameembalius.com:3011");t.default=()=>{let[e,t]=(0,u.useState)(null),[a,i]=(0,u.useState)(null),[c,l]=(0,u.useState)("");(0,u.useRef)();let o=(0,u.useRef)(),f=(0,u.useRef)(),streamStatusFunc=e=>{alert(e),"Disconnect"===e&&(f.current.srcObject=null)},streamClientRequestFunc=e=>{let{clientPeerId:t,message:n}=e;t===a&&alert(n)};return(0,u.useEffect)(()=>{let initializePeer=async()=>{let e=(await n.e(7623).then(n.bind(n,67623))).default;await t(new e(void 0,{host:"reverendsameembalius.com",port:3014,path:"/peerjs"}))};return initializePeer(),r.on("stream-client-request",streamClientRequestFunc),r.on("stream-status",streamStatusFunc),()=>{r.off("stream-client-request"),r.off("stream-status",streamStatusFunc)}},[]),(0,u.useEffect)(()=>{if(e)return e.on("open",function(e){i(e)}),e.on("call",function(e){e.answer(),e.on("stream",function(e){f.current.srcObject=e})}),()=>{e.off("open"),e.off("call")}},[e]),(0,s.jsxs)("div",{className:"container",children:[(0,s.jsx)("button",{onClick:()=>r.emit("stream",a),className:"buttonclass",children:"Join Stream"}),(0,s.jsx)("div",{id:"videoContainer"}),(0,s.jsx)("div",{children:(0,s.jsx)("video",{ref:o,autoPlay:!0,muted:!0})}),(0,s.jsx)("div",{children:(0,s.jsx)("video",{ref:f,autoPlay:!0})})]})}}},function(e){e.O(0,[3920,9774,2888,179],function(){return e(e.s=84116)}),_N_E=e.O()}]);